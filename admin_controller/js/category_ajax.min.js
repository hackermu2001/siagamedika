/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2023 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

let i=1;function addRowCat(){var t=`
          <tr id="row${i}">
              <td><input type="text" name="txtNamaCat[]" class="border-0 w-100 bg-transparent p-0 m-0" style="color: grey; box-sizing: border-box;" placeholder="Isi Nama Category..."></td>
              <td><button class="btn btn-circle btn-sm btn-danger mx-2 remove-row" name="remove" id="${i}" type="button"><i class="fas fa-trash"></i></button></td>
          </tr>
      `;i++,$(".cat_input").append(t)}function removeRowCat(){var t=$(this).attr("id");$(`#row${t}`).remove()}$(document).ready(function(){$("#add-row").click(addRowCat),$(document).on("click",".remove-row",removeRowCat),$("#submit_kategori").click(function(){let e=!0;const o=[];$("input[name='txtNamaCat[]']").each(function(){const t=$(this).val().trim();if(""===t)return e=!1;var a=t.toLowerCase();if(o.includes(a))return e=!1,alert("Nama Kategori '"+t+"' sudah ada dalam daftar."),!1;o.push(a)}),e&&$.ajax({url:"php/function_php/kategori_insert.php",method:"POST",data:$("#add_kategori").serialize(),success:function(t){alert("Selamat data kamu telah berhasil di masukkan"),window.location.reload(),$("#add_kategori")[0].reset(),$(".cat_input tr:not(:first)").remove(),i=0;$(".cat_input tbody").append(`
                      <tr id="row_input">
                          <td><input type="text" name="txtNamaCat[]" class="border-0 w-100 bg-transparent p-0 m-0" style="color: grey; box-sizing: border-box;" placeholder="Isi Nama Kategori..."></td>
                          <td><button class="btn btn-circle btn-sm btn-primary mx-2" id="add-row" type="button"><i class="fas fa-plus"></i></button></td>
                      </tr>
                      `),i++,$("#add-row").click(addRowCat),$(document).on("click",".remove-row",removeRowkategori)}})}),$(document).on("click",".delete-cat",function(){var t=$(this).data("id_cat"),a=$(this).closest("tr");$.ajax({url:"php/function_php/kategori_hapus.php",method:"POST",data:{CatToDelete:t},success:function(t){alert("Data berhasil dihapus"),a.remove(),location.reload()}})}),$(document).on("click",".edit-save-cat",function(){var t,a=$(this).closest("tr"),e=$(this).data("id_cat"),i=a.find(".editable-cell[data-column='NamaKategori']");a.hasClass("editing")?""!==(t=i.text().trim())?$.ajax({url:"php/function_php/kategori_update.php",method:"POST",data:{id_catToEdit:e,updatedNamaKategori:t},success:function(t){"Kategori sudah ada di database"===t?alert(t):(alert("Kategori berhasil diperbarui"),location.reload())}}):alert("Nama Kategori tidak boleh kosong"):(a.addClass("editing"),i.attr("contenteditable",!0),$(this).removeClass("btn-primary").addClass("btn-success").html('<i class="fas fa-check"></i>'),a.find(".cancel-edit-cat").show())}),$(document).on("click",".cancel-edit-cat",function(){var t=$(this).closest("tr");t.removeClass("editing");var a=t.find(".editable-cell[data-column='NamaKategori']");a.attr("contenteditable",!1),t.find(".edit-save-cat").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-pen"></i>'),$(this).hide(),a.text(a.data("original-value"))}),$(".cancel-edit-cat").hide()});