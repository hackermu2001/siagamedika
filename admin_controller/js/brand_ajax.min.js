/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2023 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

let i=1;function addRowBrand(){var a=`
          <tr id="row${i}">
              <td><input type="text" name="txtNamaBrand[]" class="border-0 w-100 bg-transparent p-0 m-0" style="color: grey; box-sizing: border-box;" placeholder="Isi Nama Brand..."></td>
              <td><button class="btn btn-circle btn-sm btn-danger mx-2 remove-row" name="remove" id="${i}" type="button"><i class="fas fa-trash"></i></button></td>
          </tr>
      `;i++,$(".brand_input").append(a)}function removeRowBrand(){var a=$(this).attr("id");$("#row"+a).remove()}$(document).ready(function(){$("#add-row").click(addRowBrand),$(document).on("click",".remove-row",removeRowBrand),$("#submit_brand").click(function(){let e=!0;const n=[];$("input[name='txtNamaBrand[]']").each(function(){var a,t=$(this).val().trim();return""===t?e=!1:(a=t.toLowerCase(),n.includes(a)?(e=!1,alert("Nama brand '"+t+"' sudah ada dalam daftar."),!1):void n.push(a))}),e&&$.ajax({url:"php/function_php/brand_insert.php",method:"POST",data:$("#add_brand").serialize(),success:function(a){alert("Selamat data kamu telah berhasil di masukkan"),window.location.reload(),$("#add_brand")[0].reset(),$(".brand_input tr:not(:first)").remove(),i=0;$(".brand_input tbody").append(`
                      <tr id="row_input">
                          <td><input type="text" name="txtNamaBrand[]" class="border-0 w-100 bg-transparent p-0 m-0" style="color: grey; box-sizing: border-box;" placeholder="Isi Nama Brand..."></td>
                          <td><button class="btn btn-circle btn-sm btn-primary mx-2" id="add-row" type="button"><i class="fas fa-plus"></i></button></td>
                      </tr>
                      `),i++,$("#add-row").click(addRowBrand),$(document).on("click",".remove-row",removeRowBrand)}})}),$(document).on("click",".delete-brand",function(){var a=$(this).data("sku"),t=$(this).closest("tr");$.ajax({url:"php/function_php/brand_hapus.php",method:"POST",data:{skuToDelete:a},success:function(a){alert("Data berhasil dihapus"),t.remove(),location.reload()}})}),$(document).on("click",".edit-save-brand",function(){var a,t=$(this).closest("tr"),e=$(this).data("sku"),n=t.find(".editable-cell[data-column='NamaBrand']");t.hasClass("editing")?""===(a=n.text().trim())?alert("Nama Brand tidak boleh kosong"):$.ajax({url:"php/function_php/brand_update.php",method:"POST",data:{skuToEdit:e,updatedNamaBrand:a},success:function(a){"Brand sudah ada di database"===a?alert(a):(alert("Brand berhasil diperbarui"),location.reload())}}):(t.addClass("editing"),n.attr("contenteditable",!0),$(this).removeClass("btn-primary").addClass("btn-success").html('<i class="fas fa-check"></i>'),t.find(".cancel-edit-brand").show())}),$(document).on("click",".cancel-edit-brand",function(){var a=$(this).closest("tr"),t=(a.removeClass("editing"),a.find(".editable-cell[data-column='NamaBrand']"));t.attr("contenteditable",!1),a.find(".edit-save-brand").removeClass("btn-success").addClass("btn-primary").html('<i class="fas fa-pen"></i>'),$(this).hide(),t.text(t.data("original-value"))}),$(".cancel-edit-brand").hide()});